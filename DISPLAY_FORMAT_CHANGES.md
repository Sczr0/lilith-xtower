# 新曲速递展示格式变更说明

## 🎯 变更原因

用户反馈指出：
1. 等级就是定数的整数部分（向下取整）
2. 同时显示等级和定数是冗余的
3. 玩家主要关心的是定数（用于计算RKS）

## 📝 格式对比

### ❌ 旧格式（冗余）

```markdown
### WINTER ～願いを込めて～

- **艺术家**: TOKOTOKO（西沢さんP）
- **难度**:
  - EZ: 5 (定数 5.0)    ← 等级和定数都显示，冗余
  - HD: 10 (定数 10.2)
  - IN: 14 (定数 14.5)
  - AT: 15 (定数 15.8)
```

**问题:**
- 等级5就是定数5.0向下取整，重复显示
- 占用空间，不简洁
- 用户需要的主要是定数

### ✅ 新格式（简洁）

```markdown
### WINTER ～願いを込めて～

- **艺术家**: TOKOTOKO（西沢さんP）
- **定数**:
  - EZ: 5.0     ← 只显示定数，简洁明了
  - HD: 10.2
  - IN: 14.5
  - AT: 15.8
```

**优点:**
- 只显示关键信息（定数）
- 更简洁，信息密度更高
- 等级可以通过定数推算（向下取整）
- 符合玩家实际需求

## 🔍 等级如何获取？

如果需要知道等级：

| 定数 | 等级（向下取整） |
|------|---------------|
| 5.0 | 5 |
| 10.2 | 10 |
| 14.5 | 14 |
| 15.8 | 15 |
| 16.3 | 16 |
| 19.9 | 19 |
| 20.0 | 20 |

**计算公式**: `等级 = Math.floor(定数)`

## 📊 实际使用场景

### 场景1: 查看最新曲目定数
玩家打开新曲速递页面 → 快速扫描定数 → 评估难度

**新格式更优**: 信息一目了然，不需要区分"等级"和"定数"

### 场景2: 计算RKS
玩家需要定数来计算RKS → 直接使用显示的定数

**新格式更优**: 直接显示所需信息

### 场景3: 查看游戏内等级
如果玩家想知道游戏内显示的等级 → 看定数的整数部分即可

**新格式足够**: 定数15.8 → 等级显然是15

## 🛠️ 技术实现

### CLI工具生成的Markdown
```javascript
markdown += `- **定数**:\n`;
song.charts.forEach(chart => {
  const formattedConstant = chart.constant.toFixed(1);
  markdown += `  - ${chart.diff}: ${formattedConstant}\n`;
});
```

### 前端展示
React组件直接渲染Markdown，无需额外处理：
```tsx
<ReactMarkdown>{update.content}</ReactMarkdown>
```

## ✅ 受益

1. **简洁**: 减少冗余信息
2. **清晰**: 突出关键数据（定数）
3. **一致**: CLI输入和展示格式一致（都只关注定数）
4. **高效**: 信息密度更高，扫描速度更快

## 📅 迁移说明

### 现有文件
建议更新现有的新曲速递Markdown文件，将：
```markdown
- **难度**:
  - EZ: 5 (定数 5.0)
```

改为：
```markdown
- **定数**:
  - EZ: 5.0
```

### 新文件
使用 `npm run content` 添加的新曲速递会自动使用新格式。

---

**变更日期**: 2025-10-04  
**影响范围**: CLI工具生成逻辑、示例文件、文档
